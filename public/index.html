<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Peace Missile - Mission Hub</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style> body, html { margin: 0; padding: 0; overflow: hidden; background-color: #000; } </style>
</head>
<body>
<div id="phaser-game"></div>
<script type="text/javascript">

    class LobbyScene extends Phaser.Scene {
        constructor() { super({ key: 'LobbyScene' }); }

        preload() {
            this.load.image('lobby_bg', 'https://raw.githubusercontent.com/seyuu/PeaceMissileBot/main/public/assets/lobby_bg.jpg');
            this.load.image('play_button', 'https://raw.githubusercontent.com/seyuu/PeaceMissileBot/main/public/assets/play_button.png');
            this.load.image('score_icon', 'https://raw.githubusercontent.com/seyuu/PeaceMissileBot/main/public/assets/score_icon.png');
            this.load.image('coin_icon', 'https://raw.githubusercontent.com/seyuu/PeaceMissileBot/main/public/assets/coin_icon.png');
        }

        create() {
            const gameWidth = this.cameras.main.width;
            const gameHeight = this.cameras.main.height;
            this.add.image(gameWidth / 2, gameHeight / 2, 'lobby_bg').setDisplaySize(gameWidth, gameHeight);

            const tg = window.Telegram.WebApp;
            const currentUser = (tg.initDataUnsafe && tg.initDataUnsafe.user) ? tg.initDataUnsafe.user : null;

            this.add.text(gameWidth / 2, 100, `Welcome, ${currentUser ? currentUser.first_name : 'Ambassador'}!`, { 
                fontSize: '48px', fill: '#fff', stroke: '#000', strokeThickness: 6, fontFamily: 'Poppins' 
            }).setOrigin(0.5);
            
            const playButton = this.add.image(gameWidth / 2, gameHeight - 150, 'play_button').setScale(0.8).setInteractive({ useHandCursor: true });
            
            playButton.on('pointerdown', () => {
                // Şimdilik sadece konsola yazdır, sahne geçişi yok.
                console.log("Play button clicked!");
                playButton.setAlpha(0.7);
            });

            // İstatistikleri şimdilik "placeholder" (yer tutucu) olarak gösteriyoruz.
            this.add.image(gameWidth / 2 - 100, 250, 'score_icon').setScale(0.7);
            this.add.text(gameWidth / 2 + 40, 250, `12345\n(High Score)`, { fontSize: '28px', fill: '#fff', align: 'center', fontFamily: 'Poppins' }).setOrigin(0.5);
            
            this.add.image(gameWidth / 2 - 100, 350, 'coin_icon').setScale(0.7);
            this.add.text(gameWidth / 2 + 40, 350, `999999\n($PMNOFO)`, { fontSize: '28px', fill: '#fff', align: 'center', fontFamily: 'Poppins' }).setOrigin(0.5);
        }
    }
    
    const config = { type: Phaser.AUTO, width: window.innerWidth, height: window.innerHeight, scene: LobbyScene };
    new Phaser.Game(config);

</script>
</body>
</html>